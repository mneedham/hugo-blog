+++
draft = true
date="2023-07-24 04:44:37"
title="VSCode: Adding Poetry Python Interpreter"
tag=['poetry', 'python', 'til']
category=['TIL']
description="In this post, we're going to learn how to configure Poetry as a Python interpreter in VSCode."
image="uploads/2023/07/vscode-poetry-interpreter.png"
+++

[source, python]
----
import openai
----

[source, python]
----
def analyse_reviews(user_input):
    prompt = f"""
    {user_input}
    Analyse the sentiment of the reviews above and return a JSON array as the result.
Provide sentiment on a scale of say 0-100?
The JSON must have these fields: sentiment, sentiment_score.
    """

    completion = openai.ChatCompletion.create(
        model="gpt-3.5-turbo",
        messages=[
            {"role": "system", "content": "You are a helpful review analysis tool."},
            {"role": "user", "content": prompt},
        ]
    )

    try:
        generated_text = completion.choices[0].message.content
        return json.loads(generated_text)
    except Exception as e:
        print(f"An error occurred: {e}")
        return None
----

[source, python]
----
result = analyse_reviews(reviews)
----

.Output
[source, text]
----
{'reviews': [{'review': "Possibly the worst book I've ever read.It's a huge collection of biases for all the possible countries and cultures. The whole book is structured with examples like: if you are working with Chinese people, you should take this approach, instead if your team is composed by German people you should do this etc....",
   'sentiment': 'negative',
   'sentiment_score': 15},
  {'review': 'A book full of oversimplifications, generalisations and self-contradiction. Plus many of the examples felt simply made up. Although it had one or two good ideas thrown in there, I am honestly not sure if this book can hardly help anyone.',
   'sentiment': 'negative',
   'sentiment_score': 20},
  {'review': 'I had it on my recommendations list for a long time, but my impression was always like: "damn, I don\'t need a book on cultural differences; I\'ve worked in many international enterprises, I have been trained, I have practical experience - it would be just a waste of time". In the end, it wasn\'t (a waste of time).',
   'sentiment': 'positive',
   'sentiment_score': 80}]}
----

.Output
[source, text]
----
{'reviews': [{'sentiment': 'negative', 'sentiment_score': 20},
  {'sentiment': 'negative', 'sentiment_score': 30},
  {'sentiment': 'positive', 'sentiment_score': 80}]}
----

.Output
[source, text]
----
{'sentiment': 'negative', 'sentiment_score': 20}
----